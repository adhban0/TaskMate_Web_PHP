<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TaskMate — Calendar</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Font Awesome (optional) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <style>
    body { background: #f6f7fb; }
    .card { border: 0; border-radius: 16px; }
    .shadow-soft { box-shadow: 0 10px 30px rgba(0,0,0,.06); }
    .text-muted-2 { color: #6b7280; }

    .form-control:focus, .form-select:focus {
      box-shadow: 0 0 0 .2rem rgba(17, 24, 39, .08);
      border-color: rgba(17, 24, 39, .25);
    }

    /* Calendar grid */
    .cal-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 10px;
    }
    .cal-dow {
      font-size: .85rem;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: .04em;
      text-align: center;
      padding: 6px 0;
    }
    .cal-day {
      background: #fff;
      border: 1px solid rgba(0,0,0,.06);
      border-radius: 14px;
      min-height: 120px;
      padding: 10px;
      position: relative;
    }
    .cal-day.muted {
      background: rgba(255,255,255,.55);
      color: #9ca3af;
    }
    .cal-day .num {
      font-weight: 700;
      font-size: .95rem;
      color: #111827;
    }
    .cal-day.muted .num { color: #9ca3af; }
    .cal-day.today {
      outline: 2px solid rgba(17,24,39,.20);
      outline-offset: 2px;
    }

    /* Event chips */
    .chip {
      display: flex;
      align-items: center;
      gap: .45rem;
      border-radius: 999px;
      padding: .25rem .55rem;
      font-size: .82rem;
      margin-top: 8px;
      border: 1px solid rgba(0,0,0,.08);
      background: #fff;
      color: #111827;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .dot {
      width: 10px; height: 10px; border-radius: 50%;
      flex: 0 0 auto;
      background: #111827;
    }

    /* Small pill labels */
    .pill {
      border: 1px solid rgba(0,0,0,.10);
      background: #fff;
      border-radius: 999px;
      padding: .35rem .6rem;
      font-size: .85rem;
      color: #111827;
      display: inline-flex;
      align-items: center;
      gap: .4rem;
      white-space: nowrap;
    }
  </style>
</head>

<body>
  <!-- Top Navbar (matches other pages) -->
  <nav class="navbar navbar-expand-lg bg-white border-bottom">
    <div class="container py-1">
      <a class="navbar-brand fw-semibold" href="#">TaskMate</a>

      <div class="d-flex gap-2 align-items-center">
        <input class="form-control form-control-sm" style="width: 240px;" placeholder="Search events..." />
        <button class="btn btn-sm btn-outline-secondary">Notifications</button>
        <div class="dropdown">
          <button class="btn btn-sm btn-dark dropdown-toggle" data-bs-toggle="dropdown">Account</button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="#">Profile</a></li>
            <li><a class="dropdown-item" href="#">Settings</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item text-danger" href="#">Logout</a></li>
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <main class="container my-4">
    <!-- Header -->
    <div class="d-flex flex-wrap justify-content-between align-items-end gap-2 mb-3">
      <div>
        <h2 class="mb-1">Calendar</h2>
        <div class="text-muted-2">Plan your week, track events, and stay on schedule.</div>
      </div>
      <div class="text-end">
        <div class="small text-muted-2">Today</div>
        <div class="fw-semibold" id="todayDate">—</div>
      </div>
    </div>

    <div class="row g-3">
      <!-- Left: Month view -->
      <div class="col-12 col-lg-8">
        <div class="card shadow-soft">
          <div class="card-body">
            <!-- Calendar toolbar -->
            <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-3">
              <div class="d-flex align-items-center gap-2">
                <button class="btn btn-outline-secondary" id="prevBtn" title="Previous month">
                  <i class="fa-solid fa-chevron-left"></i>
                </button>
                <button class="btn btn-outline-secondary" id="nextBtn" title="Next month">
                  <i class="fa-solid fa-chevron-right"></i>
                </button>
                <button class="btn btn-dark" id="todayBtn">
                  <i class="fa-regular fa-calendar-check me-2"></i>Today
                </button>
              </div>

              <div class="d-flex align-items-center gap-2">
                <div class="pill">
                  <i class="fa-regular fa-calendar me-1"></i>
                  <span id="monthTitle">—</span>
                </div>

                <select class="form-select form-select-sm" style="width: 140px;">
                  <option selected>Month</option>
                  <option>Week</option>
                  <option>Day</option>
                </select>

                <button class="btn btn-outline-dark btn-sm" data-bs-toggle="modal" data-bs-target="#addEventModal">
                  <i class="fa-solid fa-plus me-2"></i>Add event
                </button>
              </div>
            </div>

            <!-- Days of week -->
            <div class="cal-grid mb-2">
              <div class="cal-dow">Sun</div>
              <div class="cal-dow">Mon</div>
              <div class="cal-dow">Tue</div>
              <div class="cal-dow">Wed</div>
              <div class="cal-dow">Thu</div>
              <div class="cal-dow">Fri</div>
              <div class="cal-dow">Sat</div>
            </div>

            <!-- Calendar grid -->
            <div class="cal-grid" id="calGrid">
              <!-- Filled by JS -->
            </div>

            <div class="small text-muted-2 mt-3">
              Tip: Click any day later (when you add JS logic) to open a day view or create an event.
            </div>
          </div>
        </div>
      </div>

      <!-- Right: Agenda / Selected day -->
      <div class="col-12 col-lg-4">
        <div class="card shadow-soft mb-3">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h5 class="mb-0">Agenda</h5>
              <span class="badge text-bg-dark">This week</span>
            </div>

            <div class="list-group list-group-flush">
              <div class="list-group-item bg-transparent px-0">
                <div class="d-flex justify-content-between">
                  <div>
                    <div class="fw-semibold">Team check-in</div>
                    <div class="small text-muted-2">Today • 8:30 PM</div>
                  </div>
                  <span class="pill"><span class="dot"></span>Meeting</span>
                </div>
              </div>

              <div class="list-group-item bg-transparent px-0">
                <div class="d-flex justify-content-between">
                  <div>
                    <div class="fw-semibold">Study block (Algorithms)</div>
                    <div class="small text-muted-2">Tue • 6:00 PM</div>
                  </div>
                  <span class="pill"><span class="dot"></span>Study</span>
                </div>
              </div>

              <div class="list-group-item bg-transparent px-0">
                <div class="d-flex justify-content-between">
                  <div>
                    <div class="fw-semibold">Client call</div>
                    <div class="small text-muted-2">Wed • 5:00 PM</div>
                  </div>
                  <span class="pill"><span class="dot"></span>Work</span>
                </div>
              </div>

              <div class="list-group-item bg-transparent px-0">
                <div class="d-flex justify-content-between">
                  <div>
                    <div class="fw-semibold">Maintenance window</div>
                    <div class="small text-muted-2">Thu • 11:00 PM</div>
                  </div>
                  <span class="pill"><span class="dot"></span>Ops</span>
                </div>
              </div>
            </div>

            <div class="d-grid mt-3">
              <button class="btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#addEventModal">
                <i class="fa-solid fa-plus me-2"></i>Add event
              </button>
            </div>
          </div>
        </div>

        <div class="card shadow-soft">
          <div class="card-body">
            <h5 class="mb-2">Quick filters</h5>
            <div class="d-flex flex-wrap gap-2">
              <button class="btn btn-sm btn-outline-secondary">All</button>
              <button class="btn btn-sm btn-outline-secondary">Meetings</button>
              <button class="btn btn-sm btn-outline-secondary">Study</button>
              <button class="btn btn-sm btn-outline-secondary">Work</button>
              <button class="btn btn-sm btn-outline-secondary">Personal</button>
            </div>

            <hr class="my-3" />

            <div class="small text-muted-2">Upcoming deadline</div>
            <div class="fw-semibold">Web2 form demo</div>
            <div class="small text-muted-2">Tomorrow • Submit before midnight</div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Add Event Modal -->
  <div class="modal fade" id="addEventModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content" style="border-radius: 16px; border: 0;">
        <div class="modal-header border-0">
          <h5 class="modal-title">Add event</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body pt-0">
          <div class="mb-2">
            <label class="form-label small text-muted-2 mb-1">Title</label>
            <input class="form-control" placeholder="e.g., Client call" />
          </div>

          <div class="row g-2">
            <div class="col-6">
              <label class="form-label small text-muted-2 mb-1">Date</label>
              <input type="date" class="form-control" />
            </div>
            <div class="col-6">
              <label class="form-label small text-muted-2 mb-1">Time</label>
              <input type="time" class="form-control" />
            </div>
          </div>

          <div class="mt-2">
            <label class="form-label small text-muted-2 mb-1">Category</label>
            <select class="form-select">
              <option>Meeting</option>
              <option>Study</option>
              <option>Work</option>
              <option>Personal</option>
              <option>Ops</option>
            </select>
          </div>

          <div class="mt-2">
            <label class="form-label small text-muted-2 mb-1">Notes (optional)</label>
            <textarea class="form-control" rows="3" placeholder="Add details..."></textarea>
          </div>

          <div class="d-grid mt-3">
            <button class="btn btn-dark" type="button">
              <i class="fa-solid fa-plus me-2"></i>Create event
            </button>
          </div>
          <div class="small text-muted-2 mt-2">
            (Later you’ll connect this button to PHP to save into your database.)
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Minimal month calendar rendering (no backend needed)
    const calGrid = document.getElementById("calGrid");
    const monthTitle = document.getElementById("monthTitle");
    const todayDate = document.getElementById("todayDate");

    // Demo events (you will replace with DB later)
    // Key format: YYYY-MM-DD
    const events = {
      "2026-01-26": [
        { title: "Team check-in", type: "Meeting" },
      ],
      "2026-01-28": [
        { title: "Client call", type: "Work" },
      ],
      "2026-01-29": [
        { title: "Maintenance", type: "Ops" },
      ]
    };

    const typeDot = (type) => {
      // No custom colors requested, keeping a single dot style
      return '<span class="dot"></span>';
    };

    let view = new Date(); // current month view

    function pad(n){ return String(n).padStart(2,"0"); }
    function ymd(d){
      return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`;
    }

    function renderTodayLabel(){
      const d = new Date();
      todayDate.textContent = d.toLocaleDateString(undefined, {
        weekday: "long", year: "numeric", month: "long", day: "numeric"
      });
    }

    function renderCalendar(){
      calGrid.innerHTML = "";

      const year = view.getFullYear();
      const month = view.getMonth();

      monthTitle.textContent = view.toLocaleDateString(undefined, { month: "long", year: "numeric" });

      const first = new Date(year, month, 1);
      const startDow = first.getDay(); // 0=Sun
      const daysInMonth = new Date(year, month + 1, 0).getDate();

      // previous month padding
      const prevDays = new Date(year, month, 0).getDate();
      for(let i = startDow - 1; i >= 0; i--){
        const dayNum = prevDays - i;
        const cellDate = new Date(year, month - 1, dayNum);
        calGrid.appendChild(dayCell(cellDate, true));
      }

      // current month
      for(let d = 1; d <= daysInMonth; d++){
        const cellDate = new Date(year, month, d);
        calGrid.appendChild(dayCell(cellDate, false));
      }

      // next month padding to fill 6 rows (42 cells) nicely
      const totalCells = calGrid.children.length;
      const remaining = (totalCells <= 35) ? (42 - totalCells) : (42 - totalCells); // keep 6 rows always
      for(let d = 1; d <= remaining; d++){
        const cellDate = new Date(year, month + 1, d);
        calGrid.appendChild(dayCell(cellDate, true));
      }
    }

    function dayCell(dateObj, isMuted){
      const div = document.createElement("div");
      div.className = "cal-day" + (isMuted ? " muted" : "");

      const today = new Date();
      const isToday = dateObj.toDateString() === today.toDateString();
      if(isToday && !isMuted) div.classList.add("today");

      div.innerHTML = `<div class="d-flex justify-content-between align-items-start">
        <div class="num">${dateObj.getDate()}</div>
        <button class="btn btn-sm btn-outline-secondary py-0 px-2" title="Add">
          <i class="fa-solid fa-plus"></i>
        </button>
      </div>`;

      // demo events for this date
      const key = ymd(dateObj);
      const dayEvents = events[key] || [];
      dayEvents.slice(0, 3).forEach(e => {
        const chip = document.createElement("div");
        chip.className = "chip";
        chip.innerHTML = `${typeDot(e.type)}<span class="text-truncate">${e.title}</span>`;
        div.appendChild(chip);
      });

      // if more than 3
      if(dayEvents.length > 3){
        const more = document.createElement("div");
        more.className = "small text-muted-2 mt-2";
        more.textContent = `+${dayEvents.length - 3} more`;
        div.appendChild(more);
      }

      return div;
    }

    document.getElementById("prevBtn").addEventListener("click", () => {
      view = new Date(view.getFullYear(), view.getMonth() - 1, 1);
      renderCalendar();
    });
    document.getElementById("nextBtn").addEventListener("click", () => {
      view = new Date(view.getFullYear(), view.getMonth() + 1, 1);
      renderCalendar();
    });
    document.getElementById("todayBtn").addEventListener("click", () => {
      const t = new Date();
      view = new Date(t.getFullYear(), t.getMonth(), 1);
      renderCalendar();
    });

    renderTodayLabel();
    renderCalendar();
  </script>
</body>
</html>
